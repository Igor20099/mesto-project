(()=>{"use strict";var e=document.querySelector(".profile"),t=e.querySelector(".profile__name"),o=e.querySelector(".profile__about"),r=e.querySelector(".profile__edit-button"),n=e.querySelector(".profile__add-button"),u=document.querySelector(".popup_edit-profile"),i=u.querySelector(".popup__form"),a=u.querySelector(".popup__edit-input_type_name"),p=u.querySelector(".popup__edit-input_type_about"),c=u.querySelector(".popup__close-button"),l=document.querySelector(".popup_add-card"),s=l.querySelector(".popup__close-button"),d=l.querySelector(".popup__edit-input_type_link-image"),_=l.querySelector(".popup__form"),v=l.querySelector(".popup__edit-input_type_name"),m=document.querySelector(".popup_fullsize-image"),y=m.querySelector(".popup__image"),f=m.querySelector(".popup__image-title"),S=m.querySelector(".popup__close-button"),q=_.querySelector(".popup__save-button"),b=i.querySelector(".popup__save-button");function k(e){"Escape"===e.key&&g(document.querySelector(".popup_opened"))}function L(e){e.classList.add("popup_opened"),document.addEventListener("keydown",k)}function g(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",k)}var E,h=document.querySelector(".elements"),C=document.querySelector("#element").content;function x(e){var t=C.querySelector(".element").cloneNode(!0);return t.querySelector(".element__image").src=e.link,t.querySelector(".element__image").alt=e.name,t.querySelector(".element__image").addEventListener("click",(function(){y.src=t.querySelector(".element__image").src,y.alt=t.querySelector(".element__image").alt,f.textContent=t.querySelector(".element__image").alt,L(m)})),t.querySelector(".element__title").textContent=e.name,function(e){var t=e.querySelector(".element__like-button");t.addEventListener("click",(function(){t.classList.toggle("element__like-button_active")}))}(t),function(e){e.querySelector(".element__remove-button").addEventListener("click",(function(){e.remove()}))}(t),t}function A(e,t,o){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(o)):(t.disabled=!0,t.classList.add(o))}document.querySelector(".element__like-button"),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){h.prepend(x(e))})),r.addEventListener("click",(function(){var e,r,n,c;e=i,r=Array.from(e.querySelectorAll(".popup__input")),n=Array.from(e.querySelectorAll(".popup__input-error")),c=e.querySelector(".popup__save-button"),r.forEach((function(e){e.classList.contains("popup__input_type_error")&&(e.classList.remove("popup__input_type_error"),A(r,c,"popup__save-button_inactive"))})),n.forEach((function(e){e.classList.contains("popup__input-error_active")&&e.classList.remove("popup__input-error_active")})),a.value=t.textContent,p.value=o.textContent,""===a.value&&""===p.value?(b.classList.add("popup__save-button_inactive"),b.disabled=!0):(b.classList.remove("popup__save-button_inactive"),b.disabled=!1),L(u)})),c.addEventListener("click",(function(){g(u)})),document.addEventListener("click",(function(e){e.target===u?g(u):e.target===l?g(l):e.target===m&&g(m)})),i.addEventListener("submit",(function(e){e.preventDefault();var r=a.value,n=p.value;t.textContent=r,o.textContent=n,g(u)})),n.addEventListener("click",(function(){""===v.value&&""===d.value||!d.validity.valid||!v.validity.valid?(q.classList.add("popup__save-button_inactive"),q.disabled=!0):(q.classList.remove("popup__save-button_inactive"),q.disabled=!1),L(l)})),s.addEventListener("click",(function(){g(l)})),S.addEventListener("click",(function(){g(m)})),_.addEventListener("submit",(function(e){e.preventDefault();var t=v.value,o=d.value,r={};r.name=t,r.link=o,h.prepend(x(r)),v.value="",d.value="",g(l)})),E={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(E.formSelector)).forEach((function(e){var t,o,r,n,u,i,a,p;t=e,o=E.inputSelector,r=E.submitButtonSelector,n=E.inactiveButtonClass,u=E.inputErrorClass,i=E.errorClass,a=Array.from(t.querySelectorAll(o)),p=t.querySelector(r),A(a,p,n),a.forEach((function(e){e.addEventListener("input",(function(){!function(e,t,o,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,o,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o),n.classList.remove(r),n.textContent=""}(e,t,o,r):function(e,t,o,r,n){var u=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r),u.textContent=o,u.classList.add(n)}(e,t,t.validationMessage,o,r)}(t,e,u,i),A(a,p,n)}))}))}))})();